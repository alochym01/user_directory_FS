Testing version 0.1
debug community between freeswitch and http server:
http server and freeswitch run on same server
ngrep -W byline -d lo

Cach cai dat Freeswitch bang goi rpm
Cu phap cho lenh ln: ln –s source destination
  1.	freeswitch-1.0.6-1.i386.rpm 
  2.	freeswitch-codec-passthru-g729-1.0.6-1.i386.rpm 
  3.	freeswitch-devel-1.0.6-1.i386.rpm 
  4.	freeswitch-lang-en-1.0.6-1.i386.rpm 
  5.	freeswitch-lua-1.0.6-1.i386.rpm 
  6.	freeswitch-sounds-en-us-callie-8000-1.0.18.noarch.rpm 
  7.	freeswitch-sounds-music-8000-1.0.8-2.noarch.rpm 
  8.	freeswitch-spidermonkey-1.0.6-1.i386.rpm

Buoc 1: cai dat HDH centos version 5.7
Buoc 2: cai dat cac goi dependency
  •	yum install -y alsa-lib curl libidn libogg  libtheora  libvorbis perl postgresql-libs  unixODBC-libs
Buoc 3: cai dat freeswitch: 
  1.	rpm -ivh freeswitch-1.0.6-1.i386.rpm freeswitch-devel-1.0.6-1.i386.rpm freeswitch-codec-passthru-g729-1.0.6-1.i386.rpm freeswitch-lang-en-1.0.6-1.i386.rpm freeswitch-lua-1.0.6-1.i386.rpm freeswitch-sounds-en-us-callie-8000-1.0.18.noarch.rpm freeswitch-sounds-music-8000-1.0.8-2.noarch.rpm freeswitch-spidermonkey-1.0.6-1.i386.rpm

Buoc 4: chkconfig –-add freeswitch 
 chkconfig –-level 345 freeswitch on
Buoc 5: chown freeswitch:daemon –R /opt
Buoc 6: reboot server 

 ktra coi freeswitch co tu start hay ko, cau lenh ktra:
  1.	netstat –nlp | grep 5060
  2.	ps –ef | grep freeswitch
  3.	/etc/init.d/freeswitch status
  4.	Check IO cua harddisk, network: iostats –n -1



Enable Freeswitch use mysql instead of sqlite

  1: yum install unixODBC-devel mysql-connector-odbc mysql-server

  2: edit file /etc/odbcinst.ini:
[MySQL]
Description     = ODBC for MySQL
#check file libmyodbc3_r.so + libodbcmyS.so in the folder /usr/lib
Driver          = /usr/lib/libmyodbc3_r.so
Setup           = /usr/lib/libodbcmyS.so
Driver64        = /usr/lib64/libmyodbc3_r.so
Setup64         = /usr/lib64/libodbcmyS.so
FileUsage       = 1

  3: edit file /etc/odbc.ini:
[freeswitch]
Driver          = MySQL
SERVER          = 127.0.0.1
PORT            = 3306
DATABASE        = freeswitch
OPTION          = 67108864
Socket          = /var/lib/mysql/mysql.sock
USER            = test2            # insert your db username
PASSWORD        = pass    # insert your db password here

  4: edit file /opt/freeswitch/conf/sip_profiles/internal.xml
    <!--<param name="odbc-dsn" value="dsn:user:pass"/>--> change to     <param name="odbc-dsn" value="freeswitch:test2:pass"/>
mysql> show tables;
+-------------------------------------+
| Tables_in_freeswitch                |
+-------------------------------------+
| sip_authentication                  |
| sip_dialogs                         |
| sip_presence                        |
| sip_recovery                        |
| sip_registrations                   |
| sip_shared_appearance_dialogs       |
| sip_shared_appearance_subscriptions |
| sip_subscriptions                   |
+-------------------------------------+

  5: if you dont edit file /opt/freeswitch/conf/autoload_configs/switch.conf.xml and change the below line:
    <!-- <param name="core-db-dsn" value="dsn:username:password" /> -->
    <param name="core-db-dsn" value="freeswitch:test2:pass" />

 [root@localhost freeswitch]# ls  db/
call_limit.db  core.db  fifo.db  sofia_reg_external.db  sofia_reg_internal-ipv6.db  voicemail_default.db
    
  and your database will be the result as step 4

  if you changed and your database look like below
 mysql> show tables;
+-------------------------------------+
| Tables_in_freeswitch                |
+-------------------------------------+
| aliases                             |
| calls                               |
| channels                            |
| complete                            |
| interfaces                          |
| nat                                 |
| sip_authentication                  |
| sip_dialogs                         |
| sip_presence                        |
| sip_recovery                        |
| sip_registrations                   |
| sip_shared_appearance_dialogs       |
| sip_shared_appearance_subscriptions |
| sip_subscriptions                   |
| tasks                               |
+-------------------------------------+


push CDR log into mysql:
  1. create tables CDR to store cdr 
 CREATE TABLE cdr (
   caller_id_name varchar(30) DEFAULT NULL,
   caller_id_number varchar(30) DEFAULT NULL,
   destination_number varchar(30) DEFAULT NULL,
   context varchar(20) DEFAULT NULL,
   start_stamp datetime DEFAULT NULL,
   answer_stamp datetime DEFAULT NULL,
   end_stamp datetime DEFAULT NULL,
   duration int(11) DEFAULT NULL,
   billsec int(11) DEFAULT NULL,
   hangup_cause varchar(50) DEFAULT NULL,
   uuid varchar(100) DEFAULT NULL,
   bleg_uuid varchar(100) DEFAULT NULL,
   accountcode varchar(10) DEFAULT NULL,
   domain_name varchar(100) DEFAULT NULL
 )ENGINE=MyISAM;
  2. run command:
    2.1 in shell mode: fs_cli -x 'fsctl send_sighup' 
    2.2 command 'fsctl send_sighup in freeswitch mode 
    2.3 you can use the telnet IP of freeswitch port 8021 with pass ClueCon
  3. write the script to load the Master.csv.YY-MM-DD-Hour-Minite-second into mysql
  4. create crontab to execute the step 2 + step 3 in 5min/1hour/1day